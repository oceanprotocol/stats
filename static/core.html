<html>

<head>
	<script type="text/javascript" src=
"https://code.jquery.com/jquery-1.12.0.min.js">
	</script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,
								initial-scale=1">
	<script src=
"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js">
	</script>
	<title>VeOcean</title>
</head>

<body>
    <div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="publishedNFTs"></canvas>
    </div>
	<div><br><br><br><br><br></div>
	<div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="uniqueConsumers"></canvas>
    </div>
	
	<div><br><br><br><br><br></div>
	<div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="weeklyUniquePublishMarkets"></canvas>
    </div>

	<div><br><br><br><br><br></div>
	<div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="montlyUniquePublishMarkets"></canvas>
    </div>

	<div><br><br><br><br><br></div>
	<div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="yearlyUniquePublishMarkets"></canvas>
    </div>

	<div><br><br><br><br><br></div>
    <div style="margin-top: 20px;margin-bottom: 20px;margin-left: 297px;font-family: sans-serif;font-size: 13px;font-weight: bold;" id="uniquePublishMarkets"></div>

	<div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="uniqueConsumeMarkets"></canvas>
    </div>

	<div><br><br><br><br><br></div>
	<div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="freeConsumes"></canvas>
    </div>

	<div><br><br><br><br><br></div>
	<div class="chart-container" style="position: relative; height:300; width:800">
        <canvas id="oceanConsumes"></canvas>
    </div>
    <script>

		getPublishedNfts();
		getUniqueConsumers();
		getWeeklyUniquePublishMarkets();
		getMontlyUniquePublishMarkets();
		getYearlyUniquePublishMarkets();
		getUniquePublishMarkets();
		getUniqueConsumeMarkets();
		getFreeConsumes();
		getOceanConsumes();
        async function getPublishedNfts() {
			const response = await fetch('/api/core/publishedNFT');
			const data = await response.json();
			
			

			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
                values.push(value)
            }
			new Chart(document.getElementById("publishedNFTs"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "NFTS Published",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'NFTS Published per week'
					}
				}
			});

		}

		async function getUniqueConsumers() {
			const response = await fetch('/api/core/uniqueConsumers');
			const data = await response.json();
			
			

			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
                values.push(value)
            }
			new Chart(document.getElementById("uniqueConsumers"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "uniqueConsumers",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'Unique consumers per week'
					}
				}
			});

		}

		async function getWeeklyUniquePublishMarkets() {
			const response = await fetch('/api/core/weeklyUniquePublishMarkets');
			const data = await response.json();
			

			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
                values.push(value)
            }
			new Chart(document.getElementById("weeklyUniquePublishMarkets"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "weeklyUniquePublishMarkets",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'Unique Publishing Markets per week'
					}
				}
			});

		}

		async function getMontlyUniquePublishMarkets(){
			const response = await fetch('/api/core/montlyUniquePublishMarkets');
			const data = await response.json();


			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
                values.push(value)
            }
			new Chart(document.getElementById("montlyUniquePublishMarkets"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "montlyUniquePublishMarkets",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'Unique Publishing Markets per month'
					},
					scales: {
        				yAxes: [{
            				ticks: {
                				beginAtZero: true
            			}}]
    				}	
				}
			});

		}

		async function getYearlyUniquePublishMarkets(){
			const response = await fetch('/api/core/yearlyUniquePublishMarkets');
			const data = await response.json();

			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
                values.push(value)
            }
			new Chart(document.getElementById("yearlyUniquePublishMarkets"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "yearlyUniquePublishMarkets",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'Unique Publishing Markets per year'
					},
					scales: {
        				yAxes: [{
            				ticks: {
                				beginAtZero: true
            			}}]
    				}			
				}
			});
		}

		async function getUniquePublishMarkets() {
            const response = await fetch('api/core/totalUniquePublishMarkets');
            const data = await response.text();
            document.getElementById("uniquePublishMarkets").innerHTML = 'Total Unique Publish Markets: '+data
        }

		async function getUniqueConsumeMarkets() {
			const response = await fetch('/api/core/uniqueConsumeMarkets');
			const data = await response.json();
			
			

			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
                values.push(value)
            }
			new Chart(document.getElementById("uniqueConsumeMarkets"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "uniqueConsumeMarkets",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'Unique Consume Markets per week'
					}
				}
			});

		}

		async function getFreeConsumes() {
			const response = await fetch('/api/core/freeConsumes');
			const data = await response.json();
			
			

			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
                values.push(value)
            }
			new Chart(document.getElementById("freeConsumes"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "freeConsumes",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'Free Consumes per week'
					}
				}
			});

		}

		async function getOceanConsumes() {
			const response = await fetch('/api/core/oceanConsumes');
			const data = await response.json();
			
			labels = [];
			values = [];
            for (const [key, value] of Object.entries(data)){
                labels.push(key)
				let total=0
				for (const [key2, value2] of Object.entries(value)){
					total+=value[key2]	
				}
                values.push(total)
            }
			new Chart(document.getElementById("oceanConsumes"), {
				type: 'bar',
				data: {
					labels: labels,
					datasets: [
						{
							label: "oceanConsumes",
							data: values
						}
					]
				},
				options: {
					legend: { display: false },
					title: {
						fontFamily: 'sans-serif',
						display: true,
						text: 'Ocean Consumes per week'
					},
				}	
			});

		}

        
	</script>
</body>

</html>
